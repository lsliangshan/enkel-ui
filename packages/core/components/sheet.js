(function framework7ComponentLoader(e,s){void 0===s&&(s=!0);document,window;var t=e.$,o=(e.Template7,e.utils),a=(e.device,e.support),p=(e.Class,e.Modal),i=(e.ConstructorMethods,e.ModalMethods),r=function(e){function s(s,p){var i=o.extend({on:{}},s.params.sheet,p);e.call(this,s,i);var r,n,l,c=this;if(c.params=i,void 0===c.params.backdrop&&(c.params.backdrop="ios"!==s.theme),(r=c.params.el?t(c.params.el):t(c.params.content))&&r.length>0&&r[0].f7Modal)return r[0].f7Modal;if(0===r.length)return c.destroy();function d(e){var o=e.target,a=t(o);!s.device.desktop&&s.device.cordova&&(window.Keyboard&&window.Keyboard.isVisible||window.cordova.plugins&&window.cordova.plugins.Keyboard&&window.cordova.plugins.Keyboard.isVisible)||0===a.closest(c.el).length&&(c.params.closeByBackdropClick&&c.params.backdrop&&c.backdropEl&&c.backdropEl===o?c.close():c.params.closeByOutsideClick&&c.close())}function m(e){27===e.keyCode&&c.params.closeOnEscape&&c.close()}c.params.backdrop&&c.params.backdropEl?n=t(c.params.backdropEl):c.params.backdrop&&0===(n=s.root.children(".sheet-backdrop")).length&&(n=t('<div class="sheet-backdrop"></div>'),s.root.append(n)),o.extend(c,{app:s,$el:r,el:r[0],$backdropEl:n,backdropEl:n&&n[0],type:"sheet"});var h,f,u,g,v,w,C,y,k,b,T,O,E=!1,M=!1;function S(e){E||!c.params.swipeToClose&&!c.params.swipeToStep||c.params.swipeHandler&&0===t(e.target).closest(c.params.swipeHandler).length||(E=!0,M=!1,h={x:"touchstart"===e.type?e.targetTouches[0].pageX:e.pageX,y:"touchstart"===e.type?e.targetTouches[0].pageY:e.pageY},g=o.now(),u=void 0,w=r.hasClass("sheet-modal-top"))}function B(e){if(E){if(f={x:"touchmove"===e.type?e.targetTouches[0].pageX:e.pageX,y:"touchmove"===e.type?e.targetTouches[0].pageY:e.pageY},void 0===u&&(u=!!(u||Math.abs(f.x-h.x)>Math.abs(f.y-h.y))),u)return E=!1,void(M=!1);v=h.y-f.y,M||(b=r[0].offsetHeight,y=o.getTranslate(r[0],"y"),w?(T=c.params.swipeToClose?-b:-C,O=0):(T=0,O=c.params.swipeToClose?b:C),M=!0),k=y-v,k=Math.min(Math.max(k,T),O),e.preventDefault(),r.transition(0).transform("translate3d(0,"+k+"px,0)")}}function x(){if(E=!1,M){M=!1,r.transform("").transition("");var e=v<0?"to-bottom":"to-top",s=Math.abs(v);if(0!==s&&k!==y){var t=(new Date).getTime()-g;if(c.params.swipeToStep){var o=w?"to-bottom":"to-top",a=w?"to-top":"to-bottom",p=Math.abs(k),i=Math.abs(C);if(t<300&&s>10)return e===o&&p<i&&(r.removeClass("modal-in-swipe-step"),r.trigger("sheet:stepopen"),c.emit("local::stepOpen sheetStepOpen",c)),e===a&&p>i&&(c.params.swipeToClose?c.close():(r.addClass("modal-in-swipe-step"),r.trigger("sheet:stepclose"),c.emit("local::stepClose sheetStepClose",c))),void(e===a&&p<=i&&(r.addClass("modal-in-swipe-step"),r.trigger("sheet:stepclose"),c.emit("local::stepClose sheetStepClose",c)));if(t>=300){var n=!r.hasClass("modal-in-swipe-step");n?n&&(p>i+(b-i)/2?c.params.swipeToClose&&c.close():p>i/2&&(r.addClass("modal-in-swipe-step"),r.trigger("sheet:stepclose"),c.emit("local::stepClose sheetStepClose",c))):p<i/2?(r.removeClass("modal-in-swipe-step"),r.trigger("sheet:stepopen"),c.emit("local::stepOpen sheetStepOpen",c)):p-i>(b-i)/2&&c.params.swipeToClose&&c.close()}}else{if(e!==(w?"to-top":"to-bottom"))return;(t<300&&s>20||t>=300&&s>b/2)&&c.close()}}}}function H(e){var s=r.find(".sheet-modal-swipe-step").eq(0);s.length&&(C=r.hasClass("sheet-modal-top")?-(s.offset().top-r.offset().top+s[0].offsetHeight):r[0].offsetHeight-(s.offset().top-r.offset().top+s[0].offsetHeight),r[0].style.setProperty("--f7-sheet-swipe-step",C+"px"),e||r.addClass("modal-in-swipe-step"))}function K(){H(!0)}var X=!!a.passiveListener&&{passive:!0};return(c.params.swipeToClose||c.params.swipeToStep)&&(r.on(s.touchEvents.start,S,X),s.on("touchmove",B),s.on("touchend:passive",x),c.once("sheetDestroy",function(){r.off(s.touchEvents.start,S,X),s.off("touchmove",B),s.off("touchend:passive",x)})),c.on("sheetOpen",function(){c.params.closeOnEscape&&t(document).on("keydown",m),c.params.swipeToStep&&(H(),s.on("resize",K)),c.params.scrollToEl&&function(){var e=t(c.params.scrollToEl).eq(0);if(0!==e.length&&0!==(l=e.parents(".page-content")).length){var s,o=parseInt(l.css("padding-top"),10),a=parseInt(l.css("padding-bottom"),10),p=l[0].offsetHeight-o-r.height(),i=l[0].scrollHeight-o-r.height(),n=l.scrollTop(),d=e.offset().top-o+e[0].offsetHeight;if(d>p){var m=n+d-p;m+p>i&&(s=m+p-i+a,p===i&&(s=r.height()),l.css({"padding-bottom":s+"px"})),l.scrollTop(m,300)}}}()}),c.on("sheetOpened",function(){(c.params.closeByOutsideClick||c.params.closeByBackdropClick)&&s.on("click",d)}),c.on("sheetClose",function(){c.params.swipeToStep&&(r.removeClass("modal-in-swipe-step"),s.off("resize",K)),c.params.closeOnEscape&&t(document).off("keydown",m),c.params.scrollToEl&&l&&l.length>0&&l.css({"padding-bottom":""}),(c.params.closeByOutsideClick||c.params.closeByBackdropClick)&&s.off("click",d)}),c.stepOpen=function(){r.removeClass("modal-in-swipe-step")},c.stepClose=function(){r.addClass("modal-in-swipe-step")},c.stepToggle=function(){r.toggleClass("modal-in-swipe-step")},r[0].f7Modal=c,c}return e&&(s.__proto__=e),s.prototype=Object.create(e&&e.prototype),s.prototype.constructor=s,s}(p),n={name:"sheet",params:{sheet:{backdrop:void 0,backdropEl:void 0,closeByBackdropClick:!0,closeByOutsideClick:!1,closeOnEscape:!1,swipeToClose:!1,swipeToStep:!1,swipeHandler:null}},static:{Sheet:r},create:function(){var e=this;e.sheet=o.extend({},i({app:e,constructor:r,defaultSelector:".sheet-modal.modal-in"}),{stepOpen:function(s){var t=e.sheet.get(s);if(t&&t.stepOpen)return t.stepOpen()},stepClose:function(s){var t=e.sheet.get(s);if(t&&t.stepClose)return t.stepClose()},stepToggle:function(s){var t=e.sheet.get(s);if(t&&t.stepToggle)return t.stepToggle()}})},clicks:{".sheet-open":function(e,s){void 0===s&&(s={});t(".sheet-modal.modal-in").length>0&&s.sheet&&t(s.sheet)[0]!==t(".sheet-modal.modal-in")[0]&&this.sheet.close(".sheet-modal.modal-in"),this.sheet.open(s.sheet,s.animate)},".sheet-close":function(e,s){void 0===s&&(s={});this.sheet.close(s.sheet,s.animate)}}};if(s){if(e.prototype.modules&&e.prototype.modules[n.name])return;e.use(n),e.instance&&(e.instance.useModuleParams(n,e.instance.params),e.instance.useModule(n))}return n}(Framework7, typeof Framework7AutoInstallComponent === 'undefined' ? undefined : Framework7AutoInstallComponent))
